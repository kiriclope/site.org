<!DOCTYPE html>
<html lang="en">
<head>
<!-- 25 Dec. 2023 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>My homepage with org-mode</title>
<meta name="generator" content="Org mode">
<meta name="author" content="Alexandre Mahrach">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-1687066-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-1687066-2');
</script>
<link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css' rel='stylesheet' integrity='crossorigin' anonymous='nil'/>
<meta description='The blog of Alexandre Mahrach'/>
<link rel='alternate' type='application+rss/xml' title='The blog of Alexandre Mahrach' href='posts/rss.xml'/>
<link rel='stylesheet' href='css/index.css?v=c18771e4d9917f7bbeba0dc8707195c42a1cf1d75f55928214254bd81d1a0c6e'/>
<link rel="stylesheet" href="css/site.css?v=dfffad2303a13cebe8e9e438d5bc7ec92d5b18b4645dffec15113add46770f42" type="text/css">
</head>
<body>
<header id="preamble" class="status">
<div class="logo">
  <a href="/">
    <img src="/images/photo.png" class="avatar" alt="My photo"/>
  </a>
  <div class="title-section">
    <a href="/"><h1>Alexandre Mahrach</h1></a>
    <!-- <sub style="line-height:1;"> <h2>Data Scientist & Machine Learning Expert</h2> </sub> -->
    <nav>
      <ul>
        <li><a href="/news.html"> News </a></li>
        <li><a href="/posts/archive.html"> Posts </a></li>
        <li><a href="/tutorials/tutorials.html"> Tutorials </a></li>
        <li><a href="/about.html"> About </a></li>
        <!-- add more as needed -->
      </ul>
    </nav>
  </div>
  <div id="social">
    <a title="kiriclope on Github" href="https://github.com/kiriclope">
      <i class="fa-brands fa-github"></i>
    </a>
    <a title="amahrach on LinkedIn" href="https://linkedin.com/in/amahrach">
      <i class="fa-brands fa-linkedin"></i>
    </a>
    <!-- <a title="dmacvicar on Twitter" href="https://twitter.com/dmacvicar"> -->
      <!--   <i class="fa-brands fa-twitter"></i> -->
      <!-- </a> -->
    <a title="RSS feed" id="atom" href="posts/rss.xml">
      <i class="fa-solid fa-rss"></i>
    </a>
  </div>
</div>
</header>
<main id="content">
<header>
<h1 class="title">My homepage with org-mode</h1>
</header>
<section id="outline-container-org5758ce1" class="outline-2">
<h2 id="org5758ce1">Introduction</h2>
<div class="outline-text-2" id="text-org5758ce1">
<p>
This setup based on <a href="https://orgmode.org">org-mode</a>.
</p>
</div>
</section>

<section id="outline-container-orgd801d53" class="outline-2">
<h2 id="orgd801d53">Implementation</h2>
<div class="outline-text-2" id="text-orgd801d53">
<p>
For details about the implementation see <a href="posts/2019-09-03-migrating-from-jekyll-to-org/index.html">the introductory post</a> and the <a href="https://github.com/dmacvicar/site.org"><i aria-hidden='true' class='fa fa-github'></i> Source</a>.
</p>
</div>
</section>

<section id="outline-container-org4386a1a" class="outline-2">
<h2 id="org4386a1a">Usage</h2>
<div class="outline-text-2" id="text-org4386a1a">
<ul class="org-ul">
<li>Posts go into <code>posts/</code>
Preferably in their own subdirectory together with all their assets (self-contained)</li>
<li>Tutorials go in <code>tutorials/</code>, as they are rendered (for now) with the <a href="https://github.com/fniessen/org-html-themes">readtheorg</a> theme</li>
</ul>

<p>
To generate:
</p>

<pre class="example" id="org1b349cb">
$ make
</pre>

<p>
The output site will be rendered in <code>public/</code>.
</p>
</div>

<div id="outline-container-orgbb511b8" class="outline-3">
<h3 id="orgbb511b8">RSS Feeds</h3>
<div class="outline-text-3" id="text-orgbb511b8">
<p>
I am documenting this part because it is complicated and I tend to forget how it works everytime something breaks.
</p>

<ul class="org-ul">
<li>Each export block in the project translates the full site, file by file, to another format (taking into account excludes, includes)
As we have very different settings for the posts than we have for tutorials, we have different entries in the project for translating each subset.</li>

<li>Sitemaps allow to generate a map of all converted files in a single org file.
Eg. a sitemap in posts, will generate an org file with a list of links to all posts. This is particularly useful for the rss exporter.</li>

<li>We have an export entry in the project that goes over <span class="underline">_posts/</span>, takes a dummy export function, but generates a sitemap. This allows us to end with a <span class="underline">rss.org</span> file without really exporting anything.</li>

<li>Then we use another entry in the project, that uses the <span class="underline">RSS</span> exporter, including only <span class="underline">rss.org</span> in order to generate <span class="underline">rss.xml</span></li>

<li><p>
Now, the default sitemap function generates something like:
</p>

<div class="org-src-container">
<pre class="src src-txt">* Entries
  - [[One entry][http://link]]
  - [[Second entry][http://link]]
</pre>
</div>

<p>
Those will not be exported correctly to a list of links. Only the headline  will be exported in the RSS file.
</p>

<div class="org-src-container">
<pre class="src src-txt">* [[One entry][http://link]]
* [[Second entry][http://link]]
</pre>
</div></li>

<li><p>
By default, the link will reference the file where the link appears. Something like
</p>
<div class="org-src-container">
<pre class="src src-txt">&lt;link&gt;http://rss.org#section&lt;/link&gt;
</pre>
</div>

<p>
To change this we use <span class="underline">org-rss-use-entry-url-as-guid</span> and set the <span class="underline">RSS_PERMALINK</span> property of the headline when generating the sitemap.
The <span class="underline">RSS</span> exporter will then use the property for the <span class="underline">&lt;link&gt;</span> tag content.
</p></li>

<li>The custom entry formatter adds a headline to a temp buffer and then uses <span class="underline">org-set-property</span> to set the custom properties.</li>
<li>The sitemap function uses <span class="underline">org-list-to-generic</span> to create a list of headlines without adding a star, as it will be added by the entry function.</li>
</ul>
</div>
</div>
</section>

<section id="outline-container-org189ab0c" class="outline-2">
<h2 id="org189ab0c">Features</h2>
<div class="outline-text-2" id="text-org189ab0c">
</div>
<div id="outline-container-orgda30f2c" class="outline-4">
<h4 id="orgda30f2c">Redirection</h4>
<div class="outline-text-4" id="text-orgda30f2c">
<p>
When the site was generated using Jekyll, posts where generated in the <code>/:year/:month/:day/:id.html</code> route.
In order to generate a redirect page, use the following keyword to generate a redirect page:
</p>

<div class="org-src-container">
<pre class="src src-org"><span class="org-org-meta-line">#+REDIRECT_FROM /old/url/index.html</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf3684c6" class="outline-3">
<h3 id="orgf3684c6">Drafts</h3>
<div class="outline-text-3" id="text-orgf3684c6">
<p>
To hide a post from the list of recent posts or the full archive, use:
</p>

<div class="org-src-container">
<pre class="src src-org"><span class="org-org-meta-line">#+DRAFT t</span>
</pre>
</div>

<p>
Note that the post will still be published, but you will need to access it by its URL directly.
</p>
</div>
</div>
</section>

<section id="outline-container-orgdb1d30b" class="outline-2">
<h2 id="orgdb1d30b">License</h2>
<div class="outline-text-2" id="text-orgdb1d30b">
<p>
The code used for generating the site is licensed under the <a href="LICENSE">MIT</a> license.
</p>

<p>
The content of the site, Copyright (Â©) 2014-2019 Alexandre Mahrach.
</p>
</div>
</section>
</main>
<footer id="postamble" class="status">
<p>Last updated 25 Dec. 2023. Built with <a href="https://www.gnu.org/software/emacs/">Emacs</a> 27.2 (<a href="https://orgmode.org">Org</a> mode 9.4.4). <a href="/README.html">Details</a>.</p>
</footer>
</body>
</html>
